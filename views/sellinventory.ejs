<% include partials/header %>
<% include partials/menu %>

	<div class="divider"></div>
	<div class="divider"></div>

	<div class="container">
		<% if(successmessage && successmessage.length > 0) { %>
			<div class="alert alert-success" role="alert">
			  <%= successmessage %>
			</div>
		<% } %>

		<% if(warningmessage && warningmessage.length > 0) { %>
			<div class="alert alert-warning" role="alert">
			  <%= warningmessage %>
			</div>
		<% } %>

	<div class="divider"></div>
	<div class="divider"></div>

		<div class="centertext">
			<h1>Welcome to <span class="greentext">Sell</span> Inventory</h1>
			<h5>Choose the item that you want to sell</h5>

			<div class="row">
				<div class="col-lg-2"></div>
				<div class="col-lg-8">

					<div class="divider"></div>
					<div class="form-group">
					    <input type="text" class="form-control" id="myInput" placeholder="Search for Inventory" onkeyup="myFunction()">
					</div>

				</div>
				<div class="col-lg-2"></div>
			</div>

			<div class="divider"></div>
			<div class="divider"></div>

			<a href="/shops/<%= shop._id %>" id="addinventory"><i class="fa fa-chevron-left" aria-hidden="true"></i> Back to Shop Overview</a>&nbsp;&nbsp;
			<a href="/shops/<%= shop._id %>/transactions" id="addinventory"><i class="fa fa-money" aria-hidden="true"></i> Shop transactions</a>
			<div class="smdivider"></div>

			<table class="table">
			  <thead class="thead-light">
			    <tr>
			      <th class="leftalign" scope="col">Item name</th>
			      <th scope="col"></th>
			      <th scope="col"></th>
			    </tr>
			  </thead>
			  <tbody>

			  	<% shop.shopinventory.forEach(function(invento) { %>
			  		<tr>
				      <td class="leftalign"><%= invento.itemname %></td>
				      <td></td>
				      <td><button onclick="location.href='/shops/<%= shop._id %>/sellinventory/<%= invento._id %>';" class="btn btn-outline-success btn-sm pull-right"> Sell inventory</button></td>
				    </tr>
			  	<% }) %>

			    
			  </tbody>
			</table>

		</div>
	</div>

	<script>
		function myFunction() {
		  // Declare variables 
		  var input, filter, table, tr, td, i;
		  input = document.getElementById("myInput");
		  filter = input.value.toUpperCase();
		  table = document.getElementById("myTable");
		  tr = document.getElementsByTagName("tr");

		  // Loop through all table rows, and hide those who don't match the search query
		  for (i = 0; i < tr.length; i++) {
		    td = tr[i].getElementsByTagName("td")[0];
		    if (td) {
		      if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
		        tr[i].style.display = "";
		      } else {
		        tr[i].style.display = "none";
		      }
		    } 
		  }
		}
	</script>

<% include partials/footer %>